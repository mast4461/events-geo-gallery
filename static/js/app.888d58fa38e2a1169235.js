webpackJsonp([2,0],[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var a=n(123),i=o(a),r=n(116),c=o(r);new i["default"]({el:"body",components:{App:c["default"]}})},,,,,,,,,,,,,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=window.L;t["default"]={createMap:function(e){n=o.map(e),window.map=n,n.setView([0,0],0),o.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(n)},addMarker:function(e,t){var a=o.marker(e).addTo(n);return t&&a.on("click",t),{destroy:function(){n.removeLayer(a),t&&a.off("click",t)},setLatLng:function(e){a.setLatLng(e)}}},setView:function(e,t){n.setView(e,t)},fitLatLngs:function(e){n.fitBounds(o.latLngBounds(e),{padding:[30,30]})}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e){return L.filesDownload({path:e}).then(function(e){return(0,k["default"])(e.fileBlob,"text")}).then(JSON.parse)}function i(e){var t=e.entries,n=[];return t.forEach(function(e){var t=e.path_lower.split("/");t.shift();var o=n,a=t.length;t.forEach(function(t,n){var i=o.find(function(e){return e.name===t});if(i)o=i.children;else{var r={name:t,children:[]};n===a-1&&(r.item=e),o.push(r),o=r.children}})}),n[0]}function r(e){var t={name:e.name,locations:e.children.map(function(e){return{name:e.name,categories:e.children.filter(function(e){return"folder"===e.item[".tag"]}).map(function(e){return{name:e.name,images:e.children.map(function(e){return{name:e.name,path:e.item.path_lower,getThumbnailBlob:function(){return L.filesGetThumbnail({path:e.item.id,size:"w640h480"}).then(function(e){return e.fileBlob})}}})}}),getGeoJson:function(){var t=e.children.find(function(e){return/\.geo\.json/.test(e.name)});return t?a(t.item.path_lower):p["default"].resolve(void 0)},latLng:void 0}})};return t.locations=t.locations.sort(function(e,t){var n=e.name.toUpperCase(),o=t.name.toUpperCase();return n<o?-1:n>o?1:0}),t}function c(e){var t=e.locations.map(function(e){return e.getGeoJson().then(function(t){t&&(delete e.getGeoJson,e.latLng=s(t))})});return p["default"].all(t).then(function(){return console.log("returning tree"),e})}function s(e){var t=e.features[0].geometry.coordinates;return[t[1],t[0]]}function u(e){return L.filesListFolder(e).then(function(e){return e.entries.map(function(e){return new w(e)})})["catch"](function(e){console.log(e)})}function l(){return window.localStorage.getItem("token")}function f(e){window.localStorage.setItem("token",e)}Object.defineProperty(t,"__esModule",{value:!0});var d=n(53),p=o(d),v=n(54),h=o(v),g=n(55),m=o(g),x=n(94),y=o(x),_=n(106),k=o(_),L=new y["default"]({accessToken:l()}),w=function(){function e(t){(0,h["default"])(this,e),this.name=t.name,this.path=t.path_lower}return(0,m["default"])(e,[{key:"getContents",value:function(){return u({path:this.path})}},{key:"getThumbnail",value:function(){return L.filesGetThumbnail({path:this.path})["catch"](function(e){console.log(e)})}},{key:"getLatLng",value:function(){return a(this.path).then(function(e){return e.features[0].geometry.coordinates}).then(function(e){return[e[1],e[0]]})}},{key:"getEventData",value:function(){return L.filesListFolder({path:this.path,recursive:!0}).then(i).then(r).then(c)["catch"](function(e){return console.log(e)})}}]),e}();t["default"]={getEvents:function(){return u({path:""})},setAccessToken:function(e){L.setAccessToken(e),f(e)},getAccessToken:function(){return L.getAccessToken()}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(119),i=o(a);t["default"]={components:{GeoEventsView:i["default"]}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(122),i=o(a);t["default"]={props:["categoryData"],components:{Thumbnail:i["default"]},computed:{images:function(){return this.categoryData?this.categoryData.images:[]}}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(51),i=o(a),r=n(120),c=o(r),s=n(121),u=o(s),l=n(14),f=o(l);t["default"]={props:["eventMetaData"],components:{LocationView:c["default"],MapMarker:u["default"]},data:function(){return{selectedLocation:void 0,eventData:void 0}},computed:{string:function(){return(0,i["default"])(this.eventData,null,2)},locations:function(){return this.eventData?this.eventData.locations:[]},latLngs:function(){return this.locationsWithCoordinates.map(function(e){return e.latLng})},locationsWithCoordinates:function(){return this.locations.filter(function(e){return e.latLng})}},methods:{fetchEventData:function(){var e=this;this.eventMetaData.getEventData().then(function(t){e.eventData=t,console.log((0,i["default"])(e.eventData,null,2)),e.zoomToExtent()})["catch"](function(e){return console.log(e)})},getLocationSelector:function(e){var t=this;return function(){t.selectedLocation=e}},zoomToExtent:function(){f["default"].fitLatLngs(this.latLngs)}},watch:{eventMetaData:function(){this.fetchEventData()},selectedLocation:function(){var e=this.selectedLocation.latLng;e?f["default"].setView(this.selectedLocation.latLng):this.zoomToExtent()}},ready:function(){this.fetchEventData()}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(118),i=o(a),r=n(42),c=o(r),s=n(14),u=o(s);t["default"]={components:{GeoEvent:i["default"]},data:function(){return{msg:"hello",geoEvents:[],selectedGeoEvent:void 0,accessToken:c["default"].getAccessToken()}},ready:function(){u["default"].createMap("map-container"),this.fetchEvents()},watch:{accessToken:function(){c["default"].setAccessToken(this.accessToken),this.fetchEvents()},geoEvents:function(){1===this.geoEvents.length&&(this.selectedGeoEvent=this.geoEvents[0])}},methods:{fetchEvents:function(){var e=this;c["default"].getEvents().then(function(t){e.$set("geoEvents",t)})}}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(56),i=o(a),r=n(117),c=o(r);t["default"]={props:["locationData"],components:{CategoryView:c["default"]},data:function(){return{checkedCategories:[],latLng:void 0}},computed:{categories:function(){return this.locationData?this.locationData.categories:[]}},watch:{categories:function(){this.checkedCategories=[].concat((0,i["default"])(this.categories))}}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(14),i=o(a);t["default"]={props:{latLng:{type:Array,required:!0},clickHandler:{type:Function}},data:function(){return{marker:void 0}},ready:function(){this.marker=i["default"].addMarker(this.latLng,this.clickHandler)},beforeDestroy:function(){this.marker.destroy()},watch:{latLng:function(){this.marker.setLatLng(this.latLng)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=window.URL||window.webkitURL;t["default"]={props:["imageData"],data:function(){return{imgSrc:""}},methods:{updateImgSrc:function(){var e=this;this.revokeImgSrc(),this.imageData.getThumbnailBlob().then(function(t){e.imgSrc=n.createObjectURL(t)})},revokeImgSrc:function(){this.imgSrc&&n.revokeObjectURL(this.imgSrc)},fullScreen:function(){console.log("fullScreen")}},watch:{imageData:function(){this.updateImgSrc()}},ready:function(){this.updateImgSrc()},beforeDestroy:function(){this.revokeImgSrc()}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,,,,function(e,t){e.exports=" <div id=app> <geo-events-view></geo-events-view> </div> "},function(e,t){e.exports=' <div class=category-view> <h3>{{categoryData.name}}</h3> <thumbnail v-for="image in images" :image-data=image></thumbnail> </div> '},function(e,t){e.exports=' <div> <h2>{{eventMetaData.name}}</h2> <select name=location-selector id=location-selector v-model=selectedLocation> <option v-for="location in locations" :value=location>{{location.name}}</option> </select> <label for=location-selector>Select a location</label> <location-view v-if=selectedLocation :location-data=selectedLocation></location-view> <map-marker v-for="location in locationsWithCoordinates" :lat-lng=location.latLng :click-handler=getLocationSelector(location)></map-marker> </div> '},function(e,t){e.exports=' <div> <label for=token>Access token</label> <input type=password name=token v-model=accessToken> <br> <label for=event-selector>Event</label> <select name=event-selector id=event-selector v-model=selectedGeoEvent> <option v-for="geoEvent in geoEvents" :value=geoEvent>{{geoEvent.name}}</option> </select> <div id=map-container></div> <geo-event v-if=selectedGeoEvent :event-meta-data=selectedGeoEvent></geo-event> </div> '},function(e,t){e.exports=' <div> <h2>{{locationData.name}}</h2> <p v-if="locationData && !locationData.latLng">Coordinates missing</p> <template v-for="category in categories"> <input type=checkbox :id=category.name :value=category v-model=checkedCategories checked=checked> <label :for=category.name>{{category.name}}</label> </template> <div id=categories> <category-view v-for="category in categories" :category-data=category v-show=checkedCategories.includes(category)></category-view> <div v-if="categories.length === 0">No image categories for this location</div> </div> </div> '},function(e,t){e.exports=" <div> <img class=thumbnail :src=imgSrc :alt=imageData.path @click=fullScreen> <p>{{imageData.name}}</p> </div> "},function(e,t,n){var o,a;n(100),o=n(43),a=n(110),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),a&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=a)},function(e,t,n){var o,a;n(101),o=n(44),a=n(111),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),a&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=a)},function(e,t,n){var o,a;o=n(45),a=n(112),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),a&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=a)},function(e,t,n){var o,a;n(102),o=n(46),a=n(113),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),a&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=a)},function(e,t,n){var o,a;n(103),o=n(47),a=n(114),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),a&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=a)},function(e,t,n){var o,a;o=n(48),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),a&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=a)},function(e,t,n){var o,a;n(104),o=n(49),a=n(115),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),a&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=a)},,,,function(e,t){}]);
//# sourceMappingURL=app.888d58fa38e2a1169235.js.map